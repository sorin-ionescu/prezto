#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# History configuration
HISTSIZE=1000000
SAVEHIST=1000000
setopt HIST_IGNORE_ALL_DUPS # ignore duplicated commands history list
setopt SHARE_HISTORY # share command history data between sessions

alias h="cd ~"
alias p="cd ~/projects"
alias v="vagrant"
alias g="git"
alias c="clear"
alias gl="git log --oneline --graph --decorate --all"

# Reload zsh configuration
alias reload="source ${ZDOTDIR:-$HOME}/.zprezto/runcoms/zshrc"

# Docker Control
alias dstart="docker-compose up -d"
alias dstop="docker-compose kill"

# Usage: dssh [container-name]
# Example: dssh www
dssh(){
	docker exec -it `docker ps | grep ${1:-www} | awk '{print $1}'` bash
}

# XDG Directories

export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"

# Disable command correction suggestions
unsetopt correct


# fnm (fast node manager)
export PATH=/Users/hgreen/.fnm/current/bin:$PATH
export FNM_MULTISHELL_PATH=/Users/hgreen/.fnm/current
export FNM_DIR=/Users/hgreen/.fnm
export FNM_NODE_DIST_MIRROR=https://nodejs.org/dist
export FNM_LOGLEVEL=info

      autoload -U add-zsh-hook
      _fnm_autoload_hook () {
        if [[ -f .node-version && -r .node-version ]]; then
          echo "fnm: Found .node-version"
          fnm use
        elif [[ -f .nvmrc && -r .nvmrc ]]; then
          echo "fnm: Found .nvmrc"
          fnm use
        fi
      }

      add-zsh-hook chpwd _fnm_autoload_hook \
        && _fnm_autoload_hook
